{% extends "base.html" %}
{% block content %}
  <h1>All Comments</h1>
  <ul>
    {% for comment in comments reversed %}
      <li>
        <p>{{ comment.text }}</p>
        <p>Author: {{ comment.author.username }}</p>
        {% if comment.author.profile.image %}
          <img class="rounded-circle article-img" src="{{ comment.author.profile.image.url }}" alt="{{ comment.author.username }}">
        {% endif %}
        <p>Date: {{ comment.date }}</p>
        {% if comment.author == user %}
          <a href="{% url 'comment-update' comment.pk %}">Edit</a>
          <a href="{% url 'comment-delete' comment.pk %}" onclick="return confirm('Are you sure you want to delete this comment?')">Delete</a>
        {% endif %}
      </li>
    {% empty %}
      <p>No comments yet.</p>
    {% endfor %}
  </ul>
    <form method="post" action="{% url 'comment-create' pk=article.pk %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit</button>
  </form>
{% endblock content %}
